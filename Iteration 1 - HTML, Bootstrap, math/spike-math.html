

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Calculcation of correlation</title>
</head>
<body>
  <div id="demo">
  </div>
  <script>

    var x = [83, 116, 186, 81, 114]
    var y = [11.2, 9.3, 21.6, 6.9, 10.2]

    function getSum(total, num) {
      return total + num;
    }
    console.log('sum of arrays:')
    console.log(sumArray(x))
    console.log(sumArray(y))

    function sumArray (array) {
      return array.reduce(getSum)
    }

    function arraySquare(array) {
      let squaredArray = []
      for (var i = 0; i < array.length; i++) {
        squaredArray.push(Math.pow(array[i],2))
      }
      return squaredArray
    }
    console.log('squares of arrays:')
    console.log(arraySquare(x))
    console.log(arraySquare(y))

    console.log('sum of squared arrays:')
    console.log(sumArray(arraySquare(x)))
    console.log(sumArray(arraySquare(y)))

    function arrayTimesArray (array1, array2) {
      let arraysTimed = []
      for (var i = 0; i < array1.length; i++) {
        arraysTimed.push(array1[i] * array2[i])
      }
      return arraysTimed
    }
    console.log('x array times y array:')
    console.log(arrayTimesArray(x,y))
    console.log('sum of x and y arrays:')
    console.log(sumArray(arrayTimesArray(x,y)))

    var sumX = sumArray(x)
    console.log('This is sumX',sumX)
    var sumY = sumArray(y)
    console.log('This is sumY', sumY)
    var sumXSquared = sumArray(arraySquare(x))
    console.log('This is sumXSquared', sumXSquared)
    var sumYSquared = sumArray(arraySquare(y))
    console.log('This is sumYSquared', sumYSquared)
    var sumArrayTimesArray = sumArray(arrayTimesArray(x,y))
    console.log('This is sumArrayTimesArray', sumArrayTimesArray)
    var sumXTimesSumY = sumArray(x) * sumArray(y)
    console.log('This is sumXTimesSumY', sumXTimesSumY)

    function nTimesSumArrays (array) {
      return array.length * sumArrayTimesArray
    }

    console.log('This is nTimesSumArrays', nTimesSumArrays(x))

    var topRow = nTimesSumArrays(x)-sumXTimesSumY
    console.log('This is topRow', topRow)


    function nTimesSquaredSumArrays (array, squaredSumArr) {
      return array.length*squaredSumArr
    }

    console.log('This is nTimesSquaredSumArrays', nTimesSquaredSumArrays(x, sumXSquared))

    function square (n) {
      let x = Math.pow(n,2)
      return x
    }
    var npoweredX = square(sumX)
    console.log('this is squared number for x sum', npoweredX)

    console.log('This is nTimesSquaredSumArrays for x', nTimesSquaredSumArrays(x, sumXSquared))

    console.log('This is nTimesSquaredSumArrays - npoweredX for x', nTimesSquaredSumArrays(x, sumXSquared)-npoweredX)

    var leftbottom = nTimesSquaredSumArrays(x, sumXSquared)-npoweredX

    console.log('this is left bottom of equation', leftbottom)

    var npoweredY = square(sumY)
    console.log('This is nTimesSquaredSumArrays for y', nTimesSquaredSumArrays(y, sumYSquared))

    console.log('This is nTimesSquaredSumArrays - npoweredY for y', nTimesSquaredSumArrays(y, sumYSquared)-npoweredY)

    var rightbottom = nTimesSquaredSumArrays(y, sumYSquared)-npoweredY

    var xAndY = leftbottom * rightbottom

    var bottomRow = Math.sqrt(xAndY)
    console.log('This is left times right bottom after sqrt which is the bottom row', bottomRow)

    var r = topRow/bottomRow
    console.log('R is:', r)

    var rSquared = square(r)
    console.log('This is the end', rSquared)


  </script>
</body>
</html>
